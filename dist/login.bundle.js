(()=>{"use strict";const e="../classrecords",t=(document.getElementById("Homepage_Button"),document.getElementById("login_button")),n=document.getElementById("email_username"),s=document.getElementById("password"),o=document.getElementById("alert"),a=document.getElementById("spinner");function i(e,t){e?(o.classList.remove("hidden"),o.querySelector("span").innerText=t):(o.classList.add("hidden"),a.classList.add("hidden"))}function d(t){var n;sessionStorage.setItem("token",null!==(n=t.data.token)&&void 0!==n?n:""),200===t.status&&t.data.redirect?window.location.href=e:i(!0,t.message)}document.addEventListener("DOMContentLoaded",(function(){var t;const n={token:null!==(t=sessionStorage.getItem("token"))&&void 0!==t?t:""};$.ajax({type:"POST",url:"../../api/session.php",data:"session="+JSON.stringify(n),success:function(t){JSON.parse(t).data.redirect&&(window.location.href=e)},error:function(e,t,n){}})})),t.addEventListener("click",(function(){return n.value.length&&s.value.length?(i(!1,""),function(){a.classList.remove("hidden");let e={credential:n.value.toLowerCase(),password:s.value};$.ajax({type:"POST",url:"../../api/login.php",data:"login="+JSON.stringify(e),success:function(e){d(JSON.parse(e))},error:function(e,t,n){d(JSON.parse(e.responseText))}}),a.classList.add("hidden")}()):i(!0,"Please enter the missing fields.")})),document.getElementById("Homepage_Button").onclick=function(){window.location.href="../../"}})();