(()=>{"use strict";const e="../classrecords",o=(document.getElementById("Homepage_Button"),document.getElementById("login_button")),n=document.getElementById("email_username"),t=document.getElementById("password"),s=document.getElementById("alert"),r=document.getElementById("spinner");function a(e,o){e?(s.classList.remove("hidden"),s.querySelector("span").innerText=o):(s.classList.add("hidden"),r.classList.add("hidden"))}function c(o){var n;sessionStorage.setItem("token",null!==(n=o.data.token)&&void 0!==n?n:""),200===o.status&&o.data.redirect?window.location.href=e:a(!0,o.message)}document.addEventListener("DOMContentLoaded",(function(){var o;const n={token:null!==(o=sessionStorage.getItem("token"))&&void 0!==o?o:""};$.ajax({type:"POST",url:"../../api/session.php",data:"session="+JSON.stringify(n),success:function(o){console.log("Token Response: ",o),JSON.parse(o).data.redirect&&(window.location.href=e)},error:function(e,o,n){console.group("DOM Load - Errors:"),console.error("XHR Status: ",e.status),console.error("XHR Text: ",e.responseText),console.error("Status: ",o),console.error("Error: ",n),console.groupEnd()}})})),o.addEventListener("click",(function(){return n.value.length&&t.value.length?(a(!1,""),function(){r.classList.remove("hidden");let e={credential:n.value.toLowerCase(),password:t.value};$.ajax({type:"POST",url:"../../api/login.php",data:"login="+JSON.stringify(e),success:function(e){console.log("Successful Login Response: ",e),c(JSON.parse(e))},error:function(e,o,n){console.group("Login - Errors:"),console.error("XHR Status: ",e.status),console.error("XHR Text: ",e.responseText),console.error("Status: ",o),console.error("Error: ",n),console.groupEnd(),c(JSON.parse(e.responseText))}}),r.classList.add("hidden")}()):a(!0,"Please enter the missing fields.")})),document.getElementById("Homepage_Button").onclick=function(){window.location.href="../../"}})();