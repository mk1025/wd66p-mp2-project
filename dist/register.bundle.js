(()=>{"use strict";const e=/(?=.*[0-9])/,a=/(?=.*[a-z])/,t=/(?=.*[A-Z])/,s=/(?=.*[!@#$%^&*])/,n=/\s/,m=document.getElementById("profile_upload"),r=document.getElementById("Profile_Placeholder"),l=document.getElementById("alert-box"),d=document.getElementById("alert-red-messages"),i=document.getElementById("email"),o=document.getElementById("first_name"),c=document.getElementById("last_name"),p=document.getElementById("username"),u=document.getElementById("password"),v=document.getElementById("confirm_password"),g=document.getElementById("Register_Button");function h(e,a,t){var s;let n=document.createElement("span");n.classList.add("mb-2"),n.id=e,n.innerText=a,t?(document.getElementById(e)||d.appendChild(n),l.classList.contains("hidden")&&l.classList.remove("hidden"),g.disabled=!0):null===(s=d.querySelector(`#${e}`))||void 0===s||s.remove(),0===d.children.length&&(l.classList.add("hidden"),g.disabled=!1)}function w(){$("#email").val()&&$("#username").val()&&$("#password").val()&&$("#confirm_password").val()&&$("#first_name").val()&&$("#last_name").val()?h("vm-all-inputs","",!1):h("vm-all-inputs","Please fill all inputs.",!0)}function f(e){let a=JSON.parse(e);switch(a.status){case 400:x("error",a.title,a.message);break;case 201:x("success",a.title,a.message),setTimeout((()=>{window.location.href="../login"}),5e3);break;case 409:x("warning",a.title,a.message)}}function x(e,a,t){const s=document.getElementById("modal"),n=document.getElementById("modal-container");n.innerHTML="";const m=document.createElement("i");switch(e){case"error":m.className="fa-solid fa-circle-xmark text-4xl text-red-400";break;case"warning":m.className="fa-solid fa-circle-exclamation text-4xl text-orange-400";break;case"success":m.className="fa-solid fa-circle-check text-4xl text-green-400"}const r=document.createElement("h1");r.className="font-semibold text-2xl text-center text-neutral-500",r.innerText=a;const l=document.createElement("p");l.className="text-center text-sm text-neutral-500",l.innerText=t,n.appendChild(m),n.appendChild(r),n.appendChild(l),s.showModal()}document.getElementById("Homepage_Button").addEventListener("click",(()=>{window.location.href="../../"})),g.addEventListener("click",(function(){var e;const a=null===(e=$("#profile_upload")[0].files)||void 0===e?void 0:e[0],t=new FormData;if(t.append("email_address",$("#email").val()),t.append("username",$("#username").val()),t.append("password",$("#password").val()),t.append("confirm_password",$("#confirm_password").val()),t.append("first_name",$("#first_name").val()),t.append("last_name",$("#last_name").val()),a)t.append("image",a);else{const e=new File([],"../../assets/placeholders/account.png",{type:"image/png"});t.append("image",e)}$.ajax({type:"POST",url:"../../api/registration.php",data:t,processData:!1,contentType:!1,success:function(e){f(e)},error:function(e,a,t){f(e.responseText)}})})),i.addEventListener("input",(()=>{i.validity.valid?h("vm-email","",!1):h("vm-email","Please enter a valid email address.",!0),w()})),o.addEventListener("input",w),c.addEventListener("input",w),p.addEventListener("input",(()=>{p.validity.valid?(h("vm-username","",!1),h("vm-username-minlength","",!1),h("vm-username-maxlength","",!1),h("vm-username-firstchar","",!1),h("vm-username-pattern","",!1)):(p.value.length<p.minLength?h("vm-username-minlength",`Username must have minimum of a ${p.minLength} characters.`,!0):h("vm-username-minlength","",!1),p.value.length>p.maxLength?h("vm-username-maxlength",`Username have only a maximum of ${p.maxLength} characters.`,!0):h("vm-username-maxlength","",!1),isNaN(parseInt(p.value[0]))?h("vm-username-firstchar","",!1):h("vm-username-firstchar","First character in the username must not be a number.",!0),/^\w+$/.test(p.value)?h("vm-username-pattern","",!1):h("vm-username-pattern","Username must only contain letters, numbers or an underscore.",!0)),w()})),u.addEventListener("input",(()=>{u.validity.valid?(h("vm-password-minlength","",!1),h("vm-password-maxlength","",!1),h("vm-password-digits","",!1),h("vm-password-lowercase","",!1),h("vm-password-uppercase","",!1),h("vm-password-special","",!1),h("vm-password-spaces","",!1)):(u.value.length<u.minLength?h("vm-password-minlength",`Password must have a minimum of ${u.minLength} characters`,!0):h("vm-password-minlength","",!1),u.value.length>u.maxLength?h("vm-password-maxlength",`Password must not exceed ${u.maxLength}`,!0):h("vm-password-maxlength","",!1),e.test(u.value)?h("vm-password-digits","",!1):h("vm-password-digits","Password must contain at least one digit",!0),a.test(u.value)?h("vm-password-lowercase","",!1):h("vm-password-lowercase","Password must contain at least one lowercase character",!0),t.test(u.value)?h("vm-password-uppercase","",!1):h("vm-password-uppercase","Password must contain at least one uppercase character",!0),s.test(u.value)?h("vm-password-special","",!1):h("vm-password-special","Password must have atleast one special character (!@#$%^&*)",!0),n.test(u.value)?h("vm-password-spaces","Password cannot contain spaces",!0):h("vm-password-spaces","",!1)),w()})),v.addEventListener("input",(()=>{v.value!==u.value?h("vm-confirm-password","Passwords do not match",!0):h("vm-confirm-password","",!1),w()})),m.addEventListener("change",(()=>{var e;const a=null===(e=m.files)||void 0===e?void 0:e[0];if(a){const e=new Image;e.src=URL.createObjectURL(a),e.onload=()=>{const a=e.width,t=e.height;a>=200&&a<=2048&&t>=200&&t<=2048?h("vm-image-size","",!1):h("vm-image-size","Image height and width must be between 200px and 2048px.",!0),r.src=e.src}}w()}))})();